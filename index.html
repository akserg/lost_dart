<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lost Dart by akserg</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/akserg/lost_dart">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/akserg/lost_dart/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/akserg/lost_dart/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Lost Dart</h1>
          <p>Lost Dart is Inversion of Control Container implementation for Dart.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/akserg">akserg</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h2>
<a name="lost-dart" class="anchor" href="#lost-dart"><span class="octicon octicon-link"></span></a>Lost Dart</h2>

<p>Lost Dart is lightweight dependency injection framework for Dart client and server applications.</p>

<p><a href="https://drone.io/akserg/lost_dart/latest"><img src="https://drone.io/akserg/lost_dart/status.png" alt=""></a></p>

<p>It helps you split your application into a collection of loosely-coupled pieces and then glue them back together in a flexible manner. Its aim is to make wide range of Dart applications easier to:</p>

<ul>
<li>Manage source code;</li>
<li>Encouraging code modularisation;</li>
<li>Separations of concerns;</li>
<li>Good unit testing practices.</li>
</ul><h3>
<a name="set-up" class="anchor" href="#set-up"><span class="octicon octicon-link"></span></a>Set up</h3>

<p>Lost Dart is available under the lost_dart pub package. Simply add a dependency to your pubspec.yaml file:</p>

<pre>
...
dependencies:
  lost_dart: any
</pre> 

<p>Then run pub install and youâ€™ll have everything you need to get started.</p>

<h2>
<a name="the-core-concepts-of-lost-dart-by-examples" class="anchor" href="#the-core-concepts-of-lost-dart-by-examples"><span class="octicon octicon-link"></span></a>The core concepts of Lost Dart by examples</h2>

<h3>
<a name="instantiation" class="anchor" href="#instantiation"><span class="octicon octicon-link"></span></a>Instantiation</h3>

<p>A simple example of using the Lost Dart is that to construct an instance of an object. </p>

<pre>
import 'package:lost_dart/lost_dart.dart';

// Class Baz
class Baz{
  String name;
  
  Baz([this.name = ""]);
}

void main() {
  // Create container
  Container container = new Container();
  
  // Bind Baz
  container.bind(Baz);
  container.bindAs("baz2");
  
  // Resolve baz by type
  Baz baz = container.get(Baz);
  Baz baz2 = container.getAs("baz");

  assert(baz.name == "");
  assert(baz2.name == "");
}
</pre>

<h3>
<a name="constructor-injection-constant-arguments" class="anchor" href="#constructor-injection-constant-arguments"><span class="octicon octicon-link"></span></a>Constructor injection: Constant arguments</h3>

<p>Constant values are set an constructor argument:</p>

<pre>
import 'package:lost_dart/lost_dart.dart';

// Class Baz
class Baz{
  String name;
  int number = 22;
  
  Baz([this.name = ""]);
}

void main() {
  // Create IoC container
  Container container = new Container();
  // Bind Baz
  container.bind(Baz).addConstructorConstArg("Test");
  container.bindAs("baz2").to(Baz).addConstructorConstArg("Test2");

  // Resolve baz
  Baz baz = container.get(Baz);
  Baz baz2 = container.getAs("baz2");

  // Test result
  assert(baz.name == "Test");
  assert(baz2.name == "Test2");
}
</pre>

<h3>
<a name="constructor-injection-dependencies" class="anchor" href="#constructor-injection-dependencies"><span class="octicon octicon-link"></span></a>Constructor injection: Dependencies</h3>

<p>A tree of dependencies are instantiated and injected using the constructor argument:</p>

<pre>
import 'package:lost_dart/lost_dart.dart';

// application code
class Baz{
  String name;
  int number = 22;

  Baz([this.name = "99"]);
}

class Bar{
  Baz baz;
  Bar(this.baz);
}


void main() {
  // Create IoC container
  Container container = new Container();

  container.bind(Baz);
  container.bind(Bar).addConstructorTypeArg(Baz);
  container.bindAs("bar2").to(Bar).addConstructorTypeArg(Baz);

  // Resolve bar
  Bar bar = container.get(Bar);
  Bar bar2 = container.getAs("bar2");

  // Test result of bar
  assert(bar != null);
  assert(bar.baz.name == "99");
  assert(bar2 != null);
  assert(bar2.baz.name == "99");
  assert(bar.baz == bar.baz);
}
</pre>

<h3>
<a name="property-injection-constant-values" class="anchor" href="#property-injection-constant-values"><span class="octicon octicon-link"></span></a>Property injection: Constant values</h3>

<p>Constant values are set in the property:</p>

<pre>
import 'package:lost_dart/lost_dart.dart';

// application code
class Baz{
  String name;
  int number = 22;

  Baz([this.name = "99"]);
}

void main() {
  // Create IoC container
  Container container = new Container();

  // Bind Baz
  container.bind(Baz).setConstProperty("number", 33);
  container.bindAs("baz2").to(Baz).setConstProperty("number", 44);

  // Resolve baz
  Baz baz = container.get(Baz);
  Baz baz2 = container.getAs("baz2");
  
  // Test result
  assert(baz.number == 33);
  assert(baz2.number == 44);
}
</pre>

<h3>
<a name="property-injection-dependencies" class="anchor" href="#property-injection-dependencies"><span class="octicon octicon-link"></span></a>Property injection: Dependencies</h3>

<p>A tree of dependencies are instantiated and injected using the property:</p>

<pre>
import 'package:lost_dart/lost_dart.dart';

// application code
class Baz{
  String name;

  Baz([this.name = "99"]);
}

class Bar{
  Baz baz;

  Bar();
}

void main() {

  // Create IoC container
  Container container = new Container();

  // Bind Bar
  container.bind(Bar).setTypeProperty("baz", Bar);
  container.bindAs("bar2").to(Bar).setTypeProperty("baz", Bar);

  // Bind Baz
  container.bind(Baz);

  // Resolve bar
  Bar bar = container.get(Bar);
  Bar bar2 = container.getAs("bar2");
  
  // Test result
  assert(bar.baz.name == bar2.baz.name);
}
</pre>

<h3>
<a name="factory-methods" class="anchor" href="#factory-methods"><span class="octicon octicon-link"></span></a>Factory methods</h3>

<p>The Factory methods have maximum flexibility to generate any type of injected values</p>

<pre>
import 'package:lost_dart/lost_dart.dart';

//application code
class Network{
  String uri;
  
  Network(this.uri);
}

class User {
  String name;
}

class Manager{
  Network network;
  User user;

  Manager(this.user);
}

void main() {
  // Create IoC container
  Container container = new Container();

  // Add host
  container.bindAs("host").toFactory((){
    return "http://127.0.0.1";
  });
  
  // Add Network
  container.bind(Network).addConstructorRefArg("host");
  
  // Add User
  container.bind(User).setConstProperty("name", "Admin");
  
  // Add Manager
  container.bind(Manager).toFactory((){
    Manager bar = new Manager(container.get(User));
    bar.network = container.get(Network);
    return bar;
  });
  
  // Resolve Manager
  Manager manager = container.get(Manager);

  // Test result
  assert(manager.network.uri == "http://127.0.0.1");
  assert(manager.user.name == "Admin");
}
</pre>

<h3>
<a name="object-scopes" class="anchor" href="#object-scopes"><span class="octicon octicon-link"></span></a>Object scopes</h3>

<p>Lost Dart supports two scopes: singleton and prototype. The first is used by default and does not need to be explicitly specified in binding.</p>

<pre>
import 'package:lost_dart/lost_dart.dart';

//application code
class Baz{
}

void main() {
  // Create IoC container
  Container container = new Container();
  
  // Add Baz
  container.bind(Baz).asPrototype();
  
  // Resolve baz - "prototype" scope.
  Baz baz = container.get(Baz);
  Baz baz1 = container.get(Baz);
  // Test prototype result
  assert(baz != baz1);
}
</pre>

<h3>
<a name="batch-binding" class="anchor" href="#batch-binding"><span class="octicon octicon-link"></span></a>Batch binding</h3>

<p>To add an array of types in a Container you can use the bindAll method.</p>

<pre>
import 'package:lost_dart/lost_dart.dart';

class Baz{
}

class Bar{
}

class Foo{
}

void main() {
  Container container = new Container();

  container.bindAll([
    Baz,
    Bar,
    Foo
  ]);

  Foo foo = container.get(Foo);

  assert(foo != null);
}
</pre>

<h3>
<a name="multi-injection" class="anchor" href="#multi-injection"><span class="octicon octicon-link"></span></a>Multi injection</h3>

<p>Lost Dart allows you to inject multiple objects bound to a particular type or interface. There are Weapon interface, and two implementations, Sword and Dagger.
The constructor of Samurai class takes an array of Weapon. Use bindAsList method of Container and specify you items here.</p>

<pre>
import 'package:lost_dart/lost_dart.dart';

/**
 * Asbtract class Weapon
 */
abstract class Weapon
{
  /**
   * Hit the [target].
   */
  String Hit(String target);
}

/**
 * Sword Weapon
 */
class Sword implements Weapon 
{
  /**
   * Hit the [target].
   */
  String Hit(String target) 
  {
    return "Slice " + target + " in half";
  }
}

/**
 * Dagger Weapon
 */
class Dagger implements Weapon 
{
  /**
   * Hit the [target].
   */
  String Hit(String target) 
  {
    return "Stab " + target + " to death";
  }
}

/**
 * Samurai fully equipped.
 */
class Samurai 
{
  List allWeapons;

  Samurai(List this.allWeapons); 

  /**
   * Just attack the [target].
   */
  void Attack(String target) 
  {
    for (Weapon weapon in this.allWeapons) {
      print(weapon.Hit(target));
    }
  }
}

void main() {
  Container container = new Container();
  // Bind weapons
  container.bind(Sword);
  container.bind(Dagger);
  // Bind weapons in list
  container.bindAsList("weapons").addAllTypesToList([Sword, Dagger]);
  // Bind Samurai
  container.bind(Samurai).addConstructorRefArg("weapons");
  
  // Get samurai 
  Samurai samurai = container.get(Samurai);
  // Atack
  samurai.Attack("your enemy");
}
</pre>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("dart language,dependency injection,inversion of control");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>